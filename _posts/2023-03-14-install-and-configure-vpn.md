---
layout: post
title: Установка и настройка VPN на VPS
tags: windows linux ssh vpn vps
---
Установка и настройка собственного VPN на VPS.

---

Перед тем, как приступить к настройке нам нужно:
1 - Купить VPS сервер, достаточно будет сервера на linux (я взял на Ubuntu) минимальной производительности. Я покупал на reg.ru. Сначала купил у FirstByte, но не все нужные мне сайты работали, не знаю в чем дело.
2 - Подключаемся к серверу по ssh


## Настройка VPN OpenVPN

Выполнено по [вот этому гайду](https://www.ixbt.com/live/sw/delaem-svoy-vpn-server-pri-pomoschi-odnoy-komandy-ego-ne-zablokiruet-dazhe-roskomnadzor.html)
Он же на [dtf](https://dtf.ru/howto/1268692-delaem-svoy-vpn-server-s-trafikom-32-tb-odnoy-komandoy)

1. Подключаемся к серверу по ssh, вводим пароль, соглашаемся с подключением
```
ssh root@ip-адрес сервера
```

2. Вводим комманду [исходный код расположен на gitgub](https://github.com/Nyr/openvpn-install) и устанавливаем сервер

```
apt update
apt upgrade // обновляем программное обеспечение

wget https://git.io/vpn -O openvpn-install.sh && bash openvpn-install.sh
```

3. Настраиваем VPN:
- Выберите протокол подключения UDP — введите цифру 1
- Согласитесь со стандартным портом. Просто нажмите enter
- Выберите стандартные настройки сервера для DNS, введя цифру 1
- Введите имя ключа клиента
- Нажмите Enter

4. После этого скачиваем сгенерированный ключ. Он будет в папке root тем именем, что мы выбрали и расширением ovpn. Можем скачать с помощью SSH, можно установить FileZilla и подключиться по FTP к серверу: адрес и пароль нам уже известны, порт 22(или 21), имя пользвателя root или то, которое у вас установлено..

5. Скачиваем с сайта [OpenVPN](https://openvpn.net/vpn-client/) клиент для компьютера и телефона, и добвляем полученный ключь в клиент. Все!


## Настройка VPN Outline

Сделано по этим гайдам:
Раз [на хабре](https://habr.com/ru/company/hostkey/blog/686202/)
Два [на VC](https://vc.ru/office/378972-primitivnaya-ustanovka-outline-vpn-sidya-v-tualete)

1. Подключаемся к серверу по ssh, вводим пароль, соглашаемся с подключением
```
ssh root@ip-адрес сервера
```

2.  Устанавливаем докер на VPS и запускаем его
```
curl https://get.docker.com | sh
```
также можно воспользоваться командой `wget -O - https://get.docker.com | bash`
скорее всего скрипт сам запустит Докер и добавить его в автозагрузку. Но если что-то пошло не так, это можно сделать самому `systemctl enable docker && systemctl start docker`

3. Устанавливаем Outline

Скачиваем Outline manager
![Установка и настройка VPN на VPS](/assets/vpn/Pastedimage20230210195438.png)

В главном окне программы нужно выбрать пункт **«Настроить Outline где угодно»** (правый нижний угол).
![Установка и настройка VPN на VPS](/assets/vpn/Pastedimage20230210205330.png)
После нажатия кнопки **«Настроить»** будет экран с инструкциями, в котором будет приведена длинная команда
![Установка и настройка VPN на VPS](/assets/vpn/Pastedimage20230210205355.png)
Копируем эту команду из **поля 1** и вставляем ее в терминал сервера, после работы скрипта терминал вернет результат, выделенный зеленым. 
![Установка и настройка VPN на VPS](/assets/vpn/Pastedimage20230210205746.png)
Вставляем его в Outline Manager и нажимаем Готово
![Установка и настройка VPN на VPS](/assets/vpn/Pastedimage20230210205935.png)

Сервер Outline настроен.

4. Теперь скачиваем клиент для своей системы. Создаем ключ в Менеджере Outline для каждого устройства, своего или тех, кому собирамся дать доступ. И вставляем ключ в Клиент Outline.
5. Готово!

